{"version":3,"sources":["webpack:///webpack/bootstrap bf5423246fc7ec63b52c","webpack:///./src/translangular.ts","webpack:///./src/translangular.provider.ts","webpack:///./src/translate.filter.ts"],"names":["translangular","TranslangularProvider","TranslangularProvider.constructor","TranslangularProvider.config","TranslangularProvider.$get","TranslateFilter"],"mappings":"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","file":"./dist/translangular.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bf5423246fc7ec63b52c\n **/","/// <reference path=\"../typings/index.d.ts\" />\n\n//import { config } from './translangular.config.dev';\n//import { runBlock } from './translangular.run';\n\n//import '../app/services/terms/terms.service';\n\nimport { TranslangularProvider } from './translangular.provider';\nimport { TranslateFilter } from './translate.filter';\n\n\n\nmodule translangular {\n  'use strict';\n\n  angular.module('translangular', ['restangular', 'angular.filter', 'tmh.dynamicLocale'])\n    //.config(config)\n    //.run(runBlock)\n    .config(['tmhDynamicLocaleProvider', function(tmhDynamicLocaleProvider) {\n      tmhDynamicLocaleProvider.localeLocationPattern('https://s.brightspace.com/lib/angular/1.4.9/i18n/angular-locale_{{locale}}.js');\n    }])\n    .provider('Translangular', TranslangularProvider)\n    .filter('translate', TranslateFilter);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translangular.ts\n **/","interface IOpts {\n  supported: string[];\n  dynamic: boolean;\n  default: string;\n}\n\ninterface IRootScope extends ng.IRootScopeService {\n  localeId: string;\n}\n\n/** @ngInject */\nexport class TranslangularProvider {\n\n  private supported: string[] = ['en-us'];\n  private dynamic: boolean = true;\n  private default: string = 'en-US';\n\n  config(opts: IOpts) {\n    this.supported = opts.supported;\n    this.dynamic = opts.dynamic;\n    this.default = opts.default;\n  }\n\n  /** @ngInject */\n  $get(Restangular: restangular.IService, tmhDynamicLocale, $rootScope: IRootScope, constants) {\n\n    var Translangular = function(opts: IOpts) {\n\n      this.supported = opts.supported;\n      this.dynamic = opts.dynamic;\n      this.default = opts.default;\n\n      this.resolved = false;\n\n      this.set = (lang: string) => {\n\n        if (this.resolved && this.lang == lang) { return; }\n\n        if (this.supported.indexOf(lang) === -1) {\n          lang = lang.split('-')[0];\n          if (this.supported.indexOf(lang) === -1) {\n            lang = this.default;\n          }\n        }\n\n        tmhDynamicLocale.set(lang.toLowerCase());\n\n        this.resolved = false;\n        this.promise = Restangular.oneUrl('terms', constants.baseUrl + '/assets/terms/' + lang + '.json').get();\n\n        this.promise.then((resources) => {\n          this.resolved = true;\n          this.resources = resources;\n          $rootScope.localeId = lang;\n        });\n\n        this.lang = lang;\n\n      };\n\n      let lang = (navigator.languages ? navigator.languages[0] : (navigator.language || navigator.userLanguage));\n\n      $rootScope.localeId = lang; // Prevent second filter on load.\n      this.set(lang);\n\n    }\n\n    return new Translangular({\n      supported: this.supported,\n      dynamic: this.dynamic,\n      default: this.default\n    });\n\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translangular.provider.ts\n **/","interface ITranslateData {\n  _id: string;\n  _plural?: string;\n  _offset?: number;\n  _select?: string;\n  _detail?: string;\n  [propName: string]: <any>{};\n}\n\n/** @ngInject */\nexport function TranslateFilter(Translangular, $locale) {\n\n  return function(str, localeId, data: ITranslateData) {\n\n    var res = Translangular.resources['$res[ '+str+' ]'];\n\n    if (!res) {\n      console.error('Language resource \"'+str+'\" not found.');\n      return;\n    }\n\n    var resText = res['TRANSLATE'];\n\n    if (data) {\n\n      if ('index' in data) {\n        //resText = res[data['$i']] && res[data['$i']]['TRANSLATE'];\n        resText = res[data.index]['TRANSLATE'];\n      }\n\n      if (data.plural) {\n        var plurals = resText;\n        var count = data.plural-data.offset;\n\n        resText =\n        plurals['='+count] // try exact match (i.e. \"=1\", \"=2\")\n        || plurals[$locale.pluralCat(count)] // try plural category (i.e. \"few\", \"many\")\n        || plurals.other;\n      }\n\n      if (data.select) {\n        var selects = resText;\n\n        resText = selects[data.select] || selects.other;\n      }\n    }\n\n    if (Translangular.dynamic && !localeId) {\n      console.warn(\"Translate filter did not receive a 'this' (scope) argument, but dynamic locales are enabled. This resource will not be updated if the locale is changed dynamically.\");\n    }\n\n    return resText\n    .replace(/(\\{.*?\\})/g,\n    function(exp) {\n      return exp\n      .slice(1,-1)\n      .trim()\n      .split('.')\n      .reduce((o,i) => o[i], data.bindings);\n    });\n  };\n}\n\nexport { TranslateFilter };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translate.filter.ts\n **/"],"sourceRoot":""}