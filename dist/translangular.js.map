{"version":3,"sources":["webpack:///webpack/bootstrap 7d47feaa7ebe91963ab0","webpack:///./src/translangular.ts","webpack:///./src/translangular.provider.ts","webpack:///./src/translate.filter.ts"],"names":["translangular","TranslangularProvider","TranslangularProvider.constructor","TranslangularProvider.config","TranslangularProvider.$get","TranslateFilter"],"mappings":"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","file":"./dist/translangular.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7d47feaa7ebe91963ab0\n **/","/// <reference path=\"../typings/index.d.ts\" />\n\n//import { config } from './translangular.config.dev';\n//import { runBlock } from './translangular.run';\n\n//import '../app/services/terms/terms.service';\n\nimport { TranslangularProvider } from './translangular.provider';\nimport { TranslateFilter } from './translate.filter';\n\n\n\nmodule translangular {\n  'use strict';\n\n  angular.module('translangular', ['restangular', 'angular.filter', 'tmh.dynamicLocale'])\n    //.config(config)\n    //.run(runBlock)\n    .config(['tmhDynamicLocaleProvider', function(tmhDynamicLocaleProvider) {\n      tmhDynamicLocaleProvider.localeLocationPattern('https://s.brightspace.com/lib/angular/1.4.9/i18n/angular-locale_{{locale}}.js');\n    }])\n    .provider('Translangular', TranslangularProvider)\n    .filter('translate', TranslateFilter);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translangular.ts\n **/","interface IOpts {\n  supported: string[];\n  dynamic: boolean;\n  default: string;\n}\n\ninterface IRootScope extends ng.IRootScopeService {\n  localeId: string;\n}\n\n/** @ngInject */\nexport class TranslangularProvider {\n\n  private supported: string[] = ['en-us'];\n  private dynamic: boolean = true;\n  private default: string = 'en-US';\n\n  config(opts: IOpts) {\n    this.supported = opts.supported;\n    this.dynamic = opts.dynamic;\n    this.default = opts.default;\n  }\n\n  /** @ngInject */\n  $get(Restangular: restangular.IService, tmhDynamicLocale, $rootScope: IRootScope, constants) {\n\n    var Translangular = function(opts: IOpts) {\n\n      this.supported = opts.supported;\n      this.dynamic = opts.dynamic;\n      this.default = opts.default;\n\n      this.resolved = false;\n\n      this.set = function(lang: string) {\n\n        lang = lang && lang.toLowerCase();\n\n        if (this.supported.indexOf(lang) === -1) {\n          lang = lang.split('-')[0];\n          if (this.supported.indexOf(lang) === -1) {\n            lang = this.default;\n          }\n        }\n\n        tmhDynamicLocale.set(lang);\n\n        this.resolved = false;\n        this.promise = Restangular.oneUrl('terms', constants.baseUrl + '/assets/terms/' + lang + '.json').get();\n\n        this.promise.then(() => {\n          $rootScope.localeId = lang;\n          this.resolved = true;\n        });\n\n\n        this.terms = this.promise.$object;\n\n      };\n\n      this.lang = (navigator.languages ? navigator.languages[0] : (navigator.language || navigator.userLanguage));\n\n      this.set(this.lang);\n\n    }\n\n    return new Translangular({\n      supported: this.supported,\n      dynamic: this.dynamic,\n      default: this.default\n    });\n\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translangular.provider.ts\n **/","interface ITranslateData {\n  _id: string;\n  _pluralize?: string;\n  _offset?: number;\n  _select?: string;\n  _detail?: string;\n  [propName: string]: <any>{};\n}\n\n/** @ngInject */\nexport function TranslateFilter(Translangular, $locale) {\n\n  return function(str,data: ITranslateData) {\n    var term = Translangular.terms[str];\n\n\n    if (!term) {\n      console.error('Term \"'+str+'\" not found.');\n      return;\n    }\n\n    if (data) {\n      if (data._desc) {\n        term = term[data._desc];\n      }\n      else if (data._pluralize) {\n        var pluralize = 'pluralize:'+data._pluralize;\n        var offset = data._offset ? ', offset:'+data._offset : '';\n        var plurals = term[pluralize+offset];\n\n        term =\n        plurals['='+data[data._pluralize]] // try exact match (i.e. \"=1\", \"=2\")\n        || plurals[$locale.pluralCat(data[data._pluralize])] // try plural category (i.e. \"few\", \"many\")\n        || plurals.other\n      }\n    }\n\n    // TODO: use a provider, package as module\n    if (Translangular.dynamicLocale && (!data || !data._id)) {\n      console.warn(\"Translate filter did not receive an '_id' property, and dynamicLocale is enabled. This term will not be updated if the locale is changed dynamically.\");\n    }\n\n    return term\n    .replace(/(\\{.*?\\})/g,\n    function(exp) {\n      return exp\n      .slice(1,-1)\n      .trim()\n      .split('.')\n      .reduce((o,i) => o[i], data);\n    });\n  };\n}\n\nexport { TranslateFilter };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translate.filter.ts\n **/"],"sourceRoot":""}